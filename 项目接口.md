## **==项目监测监护内容字典表接口==** 

请求路径：dictMonitorGuard/queryMonitorGuardInfoByType/==类型id（1：监测 2：监护）==

请求方式：get

返回结果 ..

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "mgId": //监测内容id
            "mgName": //监测内容名称
            "type": //监测类型 1：监测 2：监护
        }
        ...
    ]
}
```











## ==项目接口== 



#### 项目创建

请求路径：pro/createProject

请求方式：post

参数：

```json
var project={
    "proName"://"项目名称",
	"type": //'项目类型:  1:监测；2监护',
	"genre": //'相关类型：1：自动化项目；2：非自动化项目'
	"code": //项目编号
	"address":, //项目地址
	"longitude": //经度
	"latitude"://纬度
	"startDate"://项目开始时间  "2018-06-24"
	"endDate":  //项目开始时间  "2018-12-24"
	"level":    //项目等级
	"station":  //测站名称
	"construction":  //建设单位
	"constructionHead": //建设单位负责人
	"roadwork":   //"施工单位"
	"roadworkHead"://"施工单位负责人"
	"supervision"://"监理单位"
	"supervisor"://"监理单位负责人"
	"monitoringCompany"://"监测单位",
	"monitorHeadId":// 监测单位负责人id,
	"proHeadId":"1100", //项目负责人id
	"proIntroduction": //"项目简介。。。。。。。。。。。",
	"workRemind": //作业提醒   数值,
	"gistRemind": //要点提醒   数值， 
	"pinpointRemind"://销点提醒   数值， 
	"status":"1",
	"userList":["1","1100"], //关联人员列表  集合
    "eqList":["11","12","111","121"], //关联设备列表  集合 
    "freqDay": //报表频率 ___天   数值
    "freqCount": //报表频率 ___次 数值
	"monitorList":[    // 阈值  集合  
		{"monitorId":"1",  //监测内容id 
         "singleTop":"0.5", //单次上限数值
         "singleDown":"0.6",//单次下限数值
         "sumTop":"1.5",    //累计上限数值
         "sumDown":"1.6"    //累计下限数值
         "unit":"mm"      //单位
        },
		...
	],   
	"schedulingList":[  //要点销点排班表  集合 （时间拼接）
		{
        "gistDate":"2018-06-25 09:00",    //要点时间
        "pinpointDate":"2018-06-25 18:00" //销点时间
        },
		
	],
	"gaugePointList":[ //创建测点   集合
		{
            "monitorId":"3",//检测内容ID			
         	"pointList":    //测点信息
         		[
                    {"pointName":"测点名称1", //测点名称
                     "eqId":"1"              //关联仪器id
                    }
                ]
        },
        ...	
	]
}

JSON.stringify(project) //json 转字符串
参数：
	files ：  文件对象 
	project ：JSON.stringify(project)
```

返回值

```json
{
    "success": true,
    "message": "创建项目成功", //提示
    "code": 200,
    "result": null,
    "timestamp": 1599121509474
}
```







### 修改项目

请求路径：pro/updateProjet

请求方式：post

参数：

```json
{
    "proId":  //项目id
    "proName"://"项目名称",
	"type": //'项目类型:  1:监测；2监护',
	"genre": //'相关类型：1：自动化项目；2：非自动化项目'
	"code": //项目编号
	"address":, //项目地址
	"longitude": //经度
	"latitude"://纬度
	"startDate"://项目开始时间  "2018-06-24"
	"endDate":  //项目开始时间  "2018-12-24"
	"level":    //项目等级
	"station":  //测站名称
	"construction":  //建设单位
	"constructionHead": //建设单位负责人
	"roadwork":   //"施工单位"
	"roadworkHead"://"施工单位负责人"
	"supervision"://"监理单位"
	"supervisor"://"监理单位负责人"
	"monitoringCompany"://"监测单位",
	"monitorHeadId":// 监测单位负责人id,
	"proHeadId":"1100", //项目负责人id
	"proIntroduction": //"项目简介。。。。。。。。。。。",
	"workRemind": //作业提醒   数值,
	"gistRemind": //要点提醒   数值， 
	"pinpointRemind"://销点提醒   数值， 
	"status":"1",
	"userList":["1","1100"], //关联人员列表  集合
    "eqList":["11","12","111","121"], //关联设备列表  集合 
    "freqDay": //报表频率 ___天   数值
    "freqCount": //报表频率 ___次 数值
	"monitorList":[    // 阈值  集合  
		{"monitorId":"1",  //监测内容id 
         "singleTop":"0.5", //单次上限数值
         "singleDown":"0.6",//单次下限数值
         "sumTop":"1.5",    //累计上限数值
         "sumDown":"1.6"    //累计下限数值
         "unit":"mm"      //单位
        },
		...
	],   
	"schedulingList":[  //要点销点排班表  集合 （时间拼接）
		{
        "gistDate":"2018-06-25 09:00",    //要点时间
        "pinpointDate":"2018-06-25 18:00" //销点时间
        },
		
	],
	"gaugePointList":[ //创建测点   集合
		{
            "monitorId":"3",//检测内容ID			
         	"pointList":    //测点信息
         		[
                    {"pointName": //测点名称
                     "eqId":"1"   //关联仪器id
                    }
                ]
        },
        ...	
	]
}


--注 ：  参数为 json 对象 
```

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "修改成功"
}
```





### 根据id删除项目

请求路径：pro/delProjectById/项目id

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": ""
}
```



### 查询所有项目--分页

请求路径：pro/queryProject

请求方式：get

参数：

| 参数名    | 参数类型 | 注释                                                         |
| --------- | -------- | ------------------------------------------------------------ |
| type      | int      | '项目类型:  1:监测；2监护'                                   |
| proName   | String   | 项目名称                                                     |
| proHeadId | int      | 项目负责人id                                                 |
| status    | int      | 项目状态：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档 |
| pageNum   | int      | 分页 第几页                                                  |
| pageSize  | int      | 分页 每页条数                                                |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total":  //总条数
        "list": [
            {
                "proId": 23, //项目id
                "proName": "项目名称",
                "type": 1, //项目类型:  1:监测；2监护'
                "genre": 1, //相关类型：1：自动化项目；2：非自动化项目',
                "code": "c0001", //项目编号
                "address": "地址",
                "longitude": "经度",
                "latitude": "纬度",
                "startDate": "2018-06-23T16:00:00.000+0000", //开始时间
                "endDate": "2019-06-23T16:00:00.000+0000",   //结束时间
        		"cycle": //工期（月）
                "level": "一级",   //等级
                "station": "测站名称",
                "construction": "建设单位",
                "constructionHead": "建设单位负责人",
                "roadwork": "施工单位",
                "roadworkHead": "施工单位负责人",
                "supervision": "监理单位",
                "supervisor": "监理单位负责人",
                "monitoringCompany": "上海广联环境岩土股份有限公司",//监测单位
                "monitorHeadId": 1,   //监测单位负责人id
                "monitorHeadName": "xxx",//监测单位负责人名称
                "proHeadId":  //项目负责人id
                "proHeadName": //项目负责人名称
                "proIntroduction": "项目简介",
                "workRemind":   //工作提醒
                "gistRemind": , //要点提醒
                "pinpointRemind": //销点提醒
                "status": 1,    //状态 ：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档
                "freqDay":  //频率  __天
                "freqCount": //频率  __次
                "userList": [
                    1,
                    1100
                ],  //项目成员id 集合
                "userNames": [
                    "伍杰：超级管理员",
                    "汪伟"
                ],//项目成员名字 集合
                "userNum": 2, //项目人员数
                "eqList": null,
                "eqNum": 4,  //项目仪器数
                "materialList": [  //前期资料list
                    {
                        "materialName": //资料名称
                        "newFileName":  //上传到服务器的文件名称,
                        "format": //格式
                        "uploadTime": //上传时间,
                        "proId": //项目id
                        "url": //上传到服务器的url
                        "mid": //资料id
                    }
                    ...
                ],
			   "proPhotoList": [ //项目图片list
                        {
                            "materialName": //资料名称
                            "newFileName":  //上传到服务器的文件名称,
                            "format": //格式
                            "uploadTime": //上传时间,
                            "proId": //项目id
                            "url": //上传到服务器的url
                            "type"://1：前期资料  2：项目图片
                            "mid": //资料id
                        }
                   ...
                ],
                "monitorList": [ //监测阈值信息  list
                    {
                        "monitorId": 1,  //监测内容id
                        "singleTop": 0.5, //单次上限数值
                        "singleDown": 0.6,//单次下限数值
                        "sumTop": 1.5,//累计上限数值
                        "sumDown": 1.6,//累计下限数值
                        "proId": 23,  // 所属项目id
                        "mid": 58     //阈值表ID（主键）
                    },
                   
                ],
                "schedulingList": [  //要点销点排班表list
                    {
                        "gistDate": //要点时间,
                        "pinpointDate": //销点时间,
                        "proId": //所属项目id
                        "sid":   //要点销点表id
                    },
                  
                ],
                "gaugePointList": [  //测点内容 list
                    {
                        "gaugeId": //测点内容表id （主键） 
                        "monitorId": //监测内容id
                        "proId":  //所属项目id
                        "pointList": [ //测点集合
                            {
                                "pointName": //"测点名称",
                                "eqId":  //仪器id
                                "gaugeId": //监测内容id
                                "pid": //测点表id
                            } 
                        ]
                    },
                  
                ]
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```



### 根据项目id查询人员台账

请求路径：pro/queryUserInfoByProId

请求方式：get

参数：

| 参数名   | 参数类型 | 注释          |
| -------- | -------- | ------------- |
| proId    | int      | 项目id        |
| pageNum  | int      | 分页 第几页   |
| pageSize | int      | 分页 每页条数 |

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": //总条数
        "list": [
            {
                "userId": 1, //用户id
                "userName":  //人员账号
                "realName": //真实姓名
                "delFlag": //'状态(0-未激活,1：激活)'
                "departmentId": //部门id
                "phone": //手机号
                "email": //邮箱
                "roleName": //身份
                "depName": //职位
                "proName": //项目名称"
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```





### 根据项目类型查询项目  状态数

请求路径：pro/queryProStatusNum/参数状态值（项目类型:  1:监测；2监护）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "whTotal": //维护阶段总数
        "kwTotal": //开挖阶段总数
        "jgTotal": //结构阶段总数
        "gdTotal": //归档阶段总数
        "jsTotal": //结束阶段总数
    }
}
```







## **==前期资料接口==**

### 根据项目id上传前期资料

请求路径：material/uploadFiles

请求方式：post

参数：

​		files  :文件对象

​		proId :项目id

​		type : 类型：1：前期资料 2：项目照片

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "上传成功"
}
```



### 根据id删除前期资料

请求路径：material/deleteById/==参数id值==

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### 根据项目id和type查询前期资料列表

请求路径：material/queryMaterialsByProIdAndType

参数：

​		proId :项目id

​		type : 类型：1：前期资料 2：项目照片

请求方式：get

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "materialName": //资料名称
            "newFileName": //上传到服务器的文件名称
            "format": //格式
            "uploadTime": //上传时间
            "proId": //所属项目id
            "url": //文件所在服务器的地址,
            "mid": //前期资料表id 
        }      
    ]
}
```



### 根据前期资料id下载文件

请求路径：material/download/==前期资料id==

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "下载成功"
}
```



## **==报表报告接口==**

### 根据项目id上传报表

请求路径：report/uploadFiles

请求方式：post

参数：

​		files  :文件对象

​		proId :项目id

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "上传成功"
}
```



### 根据id删除报表

请求路径：report/deleteById/==参数id值==

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### 根据项目id和type 查询报表  -- 分页

###   请求路径：report/queryReportListByProId

| 参数名   | 参数类型 | 注释                     |
| -------- | -------- | ------------------------ |
| proId    | int      | 项目id                   |
| type     | int      | 类型 1：日报 2：阶段报表 |
| pageNum  | int      | 第几页                   |
| pageSize | int      | 每页记录数               |

请求方式：get

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": 1,
        "list": [
            {
                "type": //类型
                "startDate": //开始时间,
                "reportName": //报表名称,
                "fileName": //服务器文件名称
                "ext": //文件类型
                "url": //存储在服务的地址
                "proId": //项目id
                "rid": //报表id
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```



### 根据报表id下载文件

请求路径：report/download/==报表id==

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "下载成功"
}
```





## **==工程联系单接口==**

### 根据项目id上传工程联系单

请求路径：contact/uploadFiles

请求方式：post

参数：

​		files  :文件对象

​		proId :项目id

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "上传成功"
}
```



### 根据id删除工程联系单

请求路径：contact/deleteById/==参数id值==

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### 根据项目id查询工程联系单  -- 分页

### 请求路径：contact/queryContactListByProId

| 参数名   | 参数类型 | 注释       |
| -------- | -------- | ---------- |
| proId    | int      | 项目id     |
| pageNum  | int      | 第几页     |
| pageSize | int      | 每页记录数 |

请求方式：get

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": //总条数
        "list": [
            {
                "startDate"://上传时间
                "contactName": //资料名称
                "fileName": //服务器资料名称
                "userId": //用户id
                "uploadUserName": //上传用户
                "ext": //文件类型
                "url": //存储在服务的地址
                "proId": //项目id
                "cid": //
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```



### 根据报表id下载文件

请求路径：contact/download/==报表id==

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "下载成功"
}
```



















