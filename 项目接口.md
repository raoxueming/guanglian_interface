## **	==服务器地址==**

​	http://47.115.116.86:8080/guanglian/

## **==项目监测监护内容字典表接口==** 

请求路径：dictMonitorGuard/queryMonitorGuardInfoByType/==类型id（1：监测 2：监护）==  （必填）

请求方式：get

返回结果 ..

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "mgId": //监测内容id
            "mgName": //监测内容名称
            "type": //监测类型 1：监测 2：监护
        }
        ...
    ]
}
```











## ==项目接口== 



#### **创建项目**

请求路径：pro/createProject

请求方式：post

参数：

```json
var project={
    "proName"://"项目名称",
	"type": //'项目类型:  1:监测；2监护',
	"genre": //'相关类型：1：自动化项目；2：非自动化项目'
	"code": //项目编号
	"address":, //项目地址
	"longitude": //经度
	"latitude"://纬度
	"startDate"://项目开始时间  "2018-06-24"
	"endDate":  //项目开始时间  "2018-12-24"
	"level":    //项目等级
	"station":  //测站名称
	"construction":  //建设单位
	"constructionHead": //建设单位负责人
	"roadwork":   //"施工单位"
	"roadworkHead"://"施工单位负责人"
	"supervision"://"监理单位"
	"supervisor"://"监理单位负责人"
	"monitoringCompany"://"监测单位",
	"monitorHeadId":// 监测单位负责人id,
	"proHeadId":"1100", //项目负责人id
	"proIntroduction": //"项目简介。。。。。。。。。。。",
	"workRemind": //作业提醒   数值,
	"gistRemind": //要点提醒   数值， 
	"pinpointRemind"://销点提醒   数值， 
	"status":"1",
	"userList":["1","1100"], //关联人员列表  集合
    "eqList":["11","12","111","121"], //关联设备列表  集合 
    "freqDay": //报表频率 ___天   数值
    "freqCount": //报表频率 ___次 数值
	"spotCheck": //抽查率
	"progress": //报表进度 （监护项目） 数值
	"monitorList":[    // 阈值  集合  
		{"monitorId":"1",  //监测内容id 
         "singleTop":"0.5", //单次上限数值
         "singleDown":"0.6",//单次下限数值
         "sumTop":"1.5",    //累计上限数值
         "sumDown":"1.6"    //累计下限数值
         "unit":"mm"      //单位
        },
		...
	],   
	"schedulingList":[  //要点销点排班表  集合 （时间拼接）
		{
        "gistDate":"2018-06-25 09:00",    //要点时间
        "pinpointDate":"2018-06-25 18:00" //销点时间
        },
		
	],
	"gaugePointList":[ //创建测点   集合
		{
            "monitorId":"3",//检测内容ID			
         	"pointList":    //测点信息
         		[
                    {"pointName":"测点名称1", //测点名称
                     "eqId":"1"              //关联仪器id
                    }
                ]
        },
        ...	
	]
}

JSON.stringify(project) //json 转字符串
参数：
	files ：  文件对象 
	project ：JSON.stringify(project)
```

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "proId": //返回的项目id
        "message": "创建项目成功"
    }
}
```







### 修改项目

请求路径：pro/updateProjet

请求方式：post

参数：

```json
{
    "proId":  //项目id
    "proName"://"项目名称",
	"type": //'项目类型:  1:监测；2监护',
	"genre": //'相关类型：1：自动化项目；2：非自动化项目'
	"code": //项目编号
	"address":, //项目地址
	"longitude": //经度
	"latitude"://纬度
	"startDate"://项目开始时间  "2018-06-24"
	"endDate":  //项目开始时间  "2018-12-24"
	"level":    //项目等级
	"station":  //测站名称
	"construction":  //建设单位
	"constructionHead": //建设单位负责人
	"roadwork":   //"施工单位"
	"roadworkHead"://"施工单位负责人"
	"supervision"://"监理单位"
	"supervisor"://"监理单位负责人"
	"monitoringCompany"://"监测单位",
	"monitorHeadId":// 监测单位负责人id,
	"proHeadId":"1100", //项目负责人id
	"proIntroduction": //"项目简介。。。。。。。。。。。",
	"workRemind": //作业提醒   数值,
	"gistRemind": //要点提醒   数值， 
	"pinpointRemind"://销点提醒   数值， 
	"status":"1",
	"userList":["1","1100"], //关联人员列表  集合
    "eqList":["11","12","111","121"], //关联设备列表  集合 
    "freqDay": //报表频率 ___天   数值
    "freqCount": //报表频率 ___次 数值
	"monitorList":[    // 阈值  集合  
		{"monitorId":"1",  //监测内容id 
         "singleTop":"0.5", //单次上限数值
         "singleDown":"0.6",//单次下限数值
         "sumTop":"1.5",    //累计上限数值
         "sumDown":"1.6"    //累计下限数值
         "unit":"mm"      //单位
        },
		...
	],   
	"schedulingList":[  //要点销点排班表  集合 （时间拼接）
		{
        "gistDate":"2018-06-25 09:00",    //要点时间
        "pinpointDate":"2018-06-25 18:00" //销点时间
        },
		
	],
	"gaugePointList":[ //创建测点   集合
		{
            "monitorId":"3",//检测内容ID			
         	"pointList":    //测点信息
         		[
                    {"pointName": //测点名称
                     "eqId":"1"   //关联仪器id
                    }
                ]
        },
        ...	
	]
}


--注 ：  参数为 json 对象 
```

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "修改成功"
}
```





### 根据id删除项目

请求路径：pro/delProjectById/项目id  （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": ""
}
```



### APP-查询所有项目--分页

请求路径：pro/queryProjectForApp

请求方式：get

参数：

| 参数名   | 参数类型 | 注释                                                         |
| -------- | -------- | ------------------------------------------------------------ |
| type     | int      | '项目类型:  1:监测；2监护' （非必填）                        |
| proName  | String   | 项目名称 （非必填）                                          |
| flag     | int      | 项目状态：1:在建 2:停工  (app  非必填)                       |
| status   | int      | 项目状态：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档 （非必填） |
| pageNum  | int      | 分页 第几页  （必填）                                        |
| pageSize | int      | 分页 每页条数 （必填）                                       |
| warnFlag | int      | 告警项目：1   全部：2                                        |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total":  //总条数
        "current": //第几页
        "size": //每页记录数
        "pages":   //总页数
        "records": [
            {
                "proId": 23, //项目id
                "proName": "项目名称",
                "type": 1, //项目类型:  1:监测；2监护'
                "genre": 1, //相关类型：1：自动化项目；2：非自动化项目',
                "longitude": "经度",
                "latitude": "纬度",
        	    "updateTime"://更新时间
                "startDate": "2018-06-23T16:00:00.000+0000", //开始时间
                "endDate": "2019-06-23T16:00:00.000+0000",   //结束时间
        		"cycle": //工期（月）
                "status": 1,    //状态 ：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档
                "freqDay":  //频率  __天
                "freqCount": //频率  __次
        	    "progress"://报表进度 （监护项目） 
         		"reportNums": //报表数  (监护项目  进度报表：reportNums/progress; 监测项目   进度报表： reportNums)
            }
        ],
      
    }
}
```



### APP-查询所有项目（数据列表）--分页

请求路径：pro/queryProjectDataListForApp

请求方式：get

参数：

| 参数名   | 参数类型 | 注释                                    |
| -------- | -------- | --------------------------------------- |
| type     | int      | '项目类型:  1:监测；2监护' （必填）     |
| pageNum  | int      | 分页 第几页  （必填）                   |
| pageSize | int      | 分页 每页条数 （必填）                  |
| warnFlag | int      | 数据类型：1：告警项目  2：全部 （必填） |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total":  //总条数
        "current": //第几页
        "size": //每页记录数
        "pages":   //总页数
        "records": [//结果集
            {
                "proId": //项目id
                "proName": //项目名称
                "type": //项目类型:  1:监测；2监护'
                "warningTotal": //告警数
                "rejectTotal": //剔除数（核实数）
            },
          ...
        ],
        
    }
}
```









### web-查询所有项目--分页

请求路径：pro/queryProject

请求方式：get

参数：

| 参数名    | 参数类型 | 注释                                                         |
| --------- | -------- | ------------------------------------------------------------ |
| type      | int      | '项目类型:  1:监测；2监护' （非必填）                        |
| stateFlag | int      | 1 ：正常 2:告警    （非必填）                                |
| proName   | String   | 项目名称 （非必填）                                          |
| proHeadId | int      | 项目负责人id （非必填）                                      |
| status    | int      | 项目状态：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档 （非必填） |
| pageNum   | int      | 分页 第几页  （必填）                                        |
| pageSize  | int      | 分页 每页条数 （必填）                                       |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total":  //总条数
        "current": //第几页
        "size": //每页记录数
        "pages":   //总页数
        "records": [//结果集
            {
                "proId": 23, //项目id
                "proName": "项目名称",
                "type": 1, //项目类型:  1:监测；2监护'
                "genre": 1, //相关类型：1：自动化项目；2：非自动化项目',
                "code":  //项目编号
                "address": "地址",
                "longitude": "经度",
                "latitude": "纬度",
                "startDate": "2018-06-23T16:00:00.000+0000", //开始时间
                "endDate": "2019-06-23T16:00:00.000+0000",   //结束时间
        		"cycle": //工期（月）
                "level": "一级",   //等级
                "station": "测站名称",
                "construction": "建设单位",
                "constructionHead": "建设单位负责人",
                "roadwork": "施工单位",
                "roadworkHead": "施工单位负责人",
                "supervision": "监理单位",
                "supervisor": "监理单位负责人",
                "monitoringCompany": "上海广联环境岩土股份有限公司",//监测单位
                "monitorHeadId": 1,   //监测单位负责人id
                "monitorHeadName": "xxx",//监测单位负责人名称
                "proHeadId":  //项目负责人id
                "proHeadName": //项目负责人名称
                "proIntroduction": "项目简介",
                "workRemind":   //工作提醒
                "gistRemind": , //要点提醒
                "pinpointRemind": //销点提醒
                "status": 1,    //状态 ：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档
                "freqDay":  //频率  __天
                "freqCount": //频率  __次
        	    "progress"://报表进度 （监护项目） 
         		"reportNums": //报表数   
                "userList": [//项目成员id 集合
                    1,
                    1202
                ],
                "userNames": [//项目成员名字 集合
                    "giao哥",
                    "汪伟"
                ],
                "userNum": 2,//项目成员 人数
                "eqNum":  //设备数
                "materialList": [ //前期资料 集合
                    {
                         "materialName": //资料名称
                        "newFileName":  //上传到服务器的文件名称,
                        "format": //格式
                        "uploadTime": //上传时间,
                        "proId": //项目id
                        "url": //上传到服务器的url
                         "type"://1：前期资料  2：项目图片
                        "mid": //资料id
                    }
                ],
			   "materialNums": //前期资料数
                "proPhotoList": [//项目图片 集合
                      {
                            "materialName": //资料名称
                            "newFileName":  //上传到服务器的文件名称,
                            "format": //格式
                            "uploadTime": //上传时间,
                            "proId": //项目id
                            "url": //上传到服务器的url
                            "type"://1：前期资料  2：项目图片
                            "mid": //资料id
                        }
                ],
               
                "reportList": [  //报表列表
                    {
                        "type": //报表类型： 1：日报表；2：阶段报表
                        "startDate": //上传时间
                        "reportName": //报表名称
                        "fileName": null,
                        "uploadUserName": //上传人名字
                        "uploadUserId": //上传人id
                        "ext": null,
                        "url": null,
                        "proId": //项目id
                        "dataList": null,
                        "rid": //报表id
                    }
...
               	 ],
            }
        ],
       
    }
}
```



### APP-根据项目id查询单个项目

请求路径：pro/queryProjectById/{proId}

请求方式：get

返回值

```json
{
    "proId": 23, //项目id
    "proName": "项目名称",
    "type": 1, //项目类型:  1:监测；2监护'
    "genre": 1, //相关类型：1：自动化项目；2：非自动化项目',
    "code":  //项目编号
    "address": "地址",
    "longitude": "经度",
    "latitude": "纬度",
    "startDate": "2018-06-23T16:00:00.000+0000", //开始时间
    "endDate": "2019-06-23T16:00:00.000+0000",   //结束时间
    "cycle": //工期（月）
    "level": "一级",   //等级
    "station": "测站名称",
    "construction": "建设单位",
    "constructionHead": "建设单位负责人",
    "roadwork": "施工单位",
    "roadworkHead": "施工单位负责人",
    "supervision": "监理单位",
    "supervisor": "监理单位负责人",
    "monitoringCompany": "上海广联环境岩土股份有限公司",//监测单位
    "monitorHeadId": 1,   //监测单位负责人id
    "monitorHeadName": "xxx",//监测单位负责人名称
    "proHeadId":  //项目负责人id
    "proHeadName": //项目负责人名称
    "proIntroduction": "项目简介",
    "workRemind":   //工作提醒
    "gistRemind": , //要点提醒
    "pinpointRemind": //销点提醒
    "status": 1,    //状态 ：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档
    "freqDay":  //频率  __天
    "freqCount": //频率  __次
    "progress"://报表进度 （监护项目） 
    "comment": //备注,
    "userList": [//项目成员id 集合
        1,
        1202
        ],
    "userNames": [//项目成员名字 集合
        "giao哥",
        "汪伟"
    ],
    "userNum": 2,//项目成员 人数
    "eqNum":  //设备数
     "materialList": [ //前期资料 集合
         {
             "materialName": //资料名称
             "newFileName":  //上传到服务器的文件名称,
             "format": //格式
             "uploadTime": //上传时间,
             "proId": //项目id
             "url": //上传到服务器的url
             "type"://1：前期资料  2：项目图片
             "mid": //资料id
         }
     ],
    "materialNums": //前期资料数
   "proPhotoList": [//项目图片 集合
       {
           "materialName": //资料名称
           "newFileName":  //上传到服务器的文件名称,
           "format": //格式
           "uploadTime": //上传时间,
           "proId": //项目id
           "url": //上传到服务器的url
           "type"://1：前期资料  2：项目图片
           "mid": //资料id
       }
   ],
	"monitorList":[    // 阈值  集合  
		{
         "monitorId":"1",  //监测内容id 
         "singleTop":"0.5", //单次上限数值
         "singleDown":"0.6",//单次下限数值
         "sumTop":"1.5",    //累计上限数值
         "sumDown":"1.6"    //累计下限数值
         "unit":"mm"      //单位
         "mid": //阈值id
         "mgName": //检测类型名称
        },
		...
	],   
    "schedulingList": null,
    "gaugePointList": [
        {
            "gaugeId": 30,
            "monitorId": 5,
            "monitorName": "支撑轴力ZLi",
            "proId": 461,
            "pointList": [
                {
                    "pointName": "yuk",
                    "eqId": 5,
                    "gaugeId": 30,
                    "pid": 71
                }
            ],
            "pointSize": null,
            "monitor": {
                "monitorId": 5,
                "singleTop": 1.0,
                "singleDown": 2.0,
                "sumTop": 1.0,
                "sumDown": 2.0,
                "unit": "mm",
                "proId": 461,
                "proName": null,
                "mgName": null,
                "mid": 52
            }
        }
    ],
     "reportList": [  //报表列表
         {
             "type": //报表类型： 1：日报表；2：阶段报表
             "startDate": //上传时间
             "reportName": //报表名称
             "fileName": null,
             "uploadUserName": //上传人名字
             "uploadUserId": //上传人id
             "ext": // 后缀
             "url": //url
             "proId": //项目id
             "dataList": null,
             "rid": //报表id
         }
         ...
     ],
    "reportNums": //报表数,
    "warningTotal"://数据告警数
}
```





### 编辑项目 根据项目id 查询所有关联

请求路径：pro/queryProjectByEdit/{proId}

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "proId": //项目id
        "proName": //项目名称
        "type":  //项目类型:  1:监测；2监护'
        "genre": //相关类型：1：自动化项目；2：非自动化项目',
        "code": //项目编号
        "address": //地址
        "longitude": //经度
        "latitude": //纬度
        "startDate": //开始时间
        "endDate":  //结束时间
        "cycle": null,
        "level": //
        "station": //测站名称
        "construction": //建设单位
        "constructionHead": //建设单位负责人
        "roadwork": //施工单位
        "roadworkHead": //施工单位负责人
        "supervision": //监理单位
        "supervisor": //监理单位负责人
        "monitoringCompany": //监测单位,
        "monitorHeadId": null,
        "monitorHeadName": //监测单位负责人
        "proHeadId": //项目负责人id
        "proHeadName": //项目负责人
        "proIntroduction": //项目简介
        "workRemind": //作业提醒
        "gistRemind": //要点提醒
        "pinpointRemind": //销点提醒
        "status":  //状态 ：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档
        "freqDay":  //频率  __天
        "freqCount": //频率  __次
        "progress"://报表进度 （监护项目） 
        "userList": [], //项目人员集合
        "userNames": []//项目人员姓名集合
        "userNum": //项目人员数
        "eqList": [],//项目设备集合
        "eqNum": //项目设备数
        "materialList": [//前期资料集合
            {
                "materialName": //资料名称
                "newFileName":  //上传到服务器的文件名称,
                "format": //格式
                "uploadTime": //上传时间,
                "proId": //项目id
                "url": //上传到服务器的url
                "type"://1：前期资料  2：项目图片
                "mid": //资料id
            }
            ...
        ],
        "materialNums": //前期资料数
        "proPhotoList": [//项目图片 集合
                      {
                            "materialName": //资料名称
                            "newFileName":  //上传到服务器的文件名称,
                            "format": //格式
                            "uploadTime": //上传时间,
                            "proId": //项目id
                            "url": //上传到服务器的url
                            "type"://1：前期资料  2：项目图片
                            "mid": //资料id
                        }
        ],
		"monitorList":[    // 阈值  集合  
            {
             "monitorId": //监测内容id 
             "singleTop": //单次上限数值
             "singleDown"://单次下限数值
             "sumTop":    //累计上限数值
             "sumDown":   //累计下限数值
             "unit":      //单位
             "proId":    //项目id
             "proName": null,
             "mgName": null,
             "mid": //阈值表id
            },
            ...
		],   		
        "schedulingList": [//要点销点排班集合
            {
                "gistDate": //要点时间
                "pinpointDate": //销点时间
                "proId": //项目id
                "sid": // 要点销点表id
            },
           ...
        ]
 		"gaugePointList": [ //测点信息 集合
                {
                    "gaugeId": //测点内容id
                    "monitorId": //监测类型id
                    "monitorName": //监测内容名称
                    "proId": //项目id
                    "pointList": [ //测点集合
                        {
                            "pointName": //测点名称
                            "eqId": //设备id
                            "gaugeId": //测点内容id
                            "pid": //项目id
                        }
                		...
                    ],
                    "pointSize": //测点数
                }
			  ...
                
          ]
        "reportList": null,
        "reportNums": null,
	    "warningTotal"://数据告警数
    }
}
```









### APP-根据项目id查询人员台账

请求路径：pro/queryUserInfoByProId

请求方式：get

参数：

| 参数名   | 参数类型 | 注释                   |
| -------- | -------- | ---------------------- |
| proId    | int      | 项目id （必填）        |
| pageNum  | int      | 分页 第几页  （必填）  |
| pageSize | int      | 分页 每页条数 （必填） |

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": //总条数
        "list": [
            {
                "userId": 1, //用户id
                "userName":  //人员账号
                "realName": //真实姓名
                "delFlag": //'状态(0-未激活,1：激活)'
                "departmentId": //部门id
                "phone": //手机号
                "email": //邮箱
                "roleName": //身份
                "depName": //部门
                "proName": //项目名称"
        	    "positionName": //职位
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```





### APP-根据项目类型查询项目  状态数

请求路径：pro/queryProStatusNum/参数状态值（项目类型:  1:监测；2监护 必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "whTotal": //维护阶段总数
        "kwTotal": //开挖阶段总数
        "jgTotal": //结构阶段总数
        "gdTotal": //归档阶段总数
        "jsTotal": //结束阶段总数
        "warningTotal"://数据告警数
    }
}
```



### APP-根据项目id 查询监测内容 

请求路径：gaugePoint/queryGaugePointByProId/{项目id} （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "gaugeId": 1,
            "monitorId": //监测类型id
            "monitorName": //监测类型名称
            "proId": //项目id
            "alias": //别名 -- 测点名称
            "proName": "9月19创建项目",
            "pointList": [
                {
                    "pointName": //测点名称
                    "eqId": 1,
                    "gaugeId": 1,
                    "pid": 1
                }
        		...
                
            ],
            "pointSize": 2  //测点数量
        }
      ...
    ]
}
```

### APP-根据项目id和本地用户收藏/取消收藏      

（请求头 header 携带token  ）

​	Key:AccessToken  value:token

请求路径：attention/attentionProByUser/{项目id} （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "收藏成功/取消成功"
}
```



### APP-根据项目id和本地用户查询该项目是否被收藏

（请求头 header 携带token  ）

​	Key:AccessToken  value:token

请求路径：attention/whetherAtteByProId/{项目id} （必填）

请求方式：get

返回值  

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": true
}
```





### APP-根据token用户查询所有收藏项目

（请求头 header 携带token  ）

​	Key:AccessToken  value:token

请求路径：attention/queryAllAttentionPro

请求方式：get

返回值  

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [] //结果类型同上（查询所有项目）
}
```



### 相关项目列表

请求路径：pro/queryAllProject

请求方式：get

参数：

| 参数名  | 参数类型 | 注释                                                         |
| ------- | -------- | ------------------------------------------------------------ |
| proName | String   | 项目名（非必填）                                             |
| isAll   | String   | defaultValue = "0" 查当前登录者所在的项目列表；1：查所有项目列表  （非必填） |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "code": //项目code
            "pro_id": //项目id
            "type": //'项目类型:  1:监测；2监护',
            "pro_name": //项目名称
            "status": //'状态 ：1：围护阶段；2：开挖阶段；3：结构阶段；4：结束阶段；5：已归档\r\n',
        }
        ...
    ]
}
```





### APP--填写项目总评

请求路径：rating/fillProRating

请求方式：post

参数：

```json
{
    "proSummary"://项目概况
    "monitorCondition"://监测点情况
    "monitorOpinion"://监测意见
    "proId"://项目id
    "startDate"://项目总评时间 eg:"2020-11-02"
    "id"://主键id  如果是修改 则必填
}

--注 ：  参数为 json 对象 
```

返回结果

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "添加项目总评成功"
}
```



### APP--根据项目id和时间查询项目总评

请求路径：rating/queryProRatingByProIdAndTime

请求方式：get

参数：

| 参数名    | 参数类型 | 注释                              |
| --------- | -------- | --------------------------------- |
| proId     | String   | 项目id（必填）                    |
| startDate | String   | 总评时间 （必填） eg:"2020-11-02" |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "id": //主键id
        "proSummary": //工程概况",
        "monitorCondition": //监测点情况",
        "monitorOpinion": //监测意见",
        "startDate": //总评时间,
        "uploadDate": //上传时间,
        "fillUserId": //上传人id
        "fillUserName": //上传人名称
        "proId": //项目id
    }
}
```







### APP--填写巡视意见

请求路径：patrol/fillPatrol

请求方式：post

参数：

```json
{
"id"://主键id  如果是修改 则必填 
"proId": //项目id
"type": //类型：1：监测 2：监护  
"startDate"://项目总评时间 eg:"2020-11-02"
   
    //监测类型
"temperature":          // 气温                                                                       
"weather":              //天气                                                                         
"windScale":           // 风级                                                                            
"zhWhjgwgxt":        //支护--围护结构外观形态                                                         
"zhCracks":          //支护--冠梁、支撑、围檁裂缝                                                       
"zhDeformation":     //支护--支撑、立柱变形                                                        
"zhLeakage":         //支护--止水帷幕开裂、渗漏                                                        
"zhSlip":            //支护--墙厚土体沉陷、裂缝及滑移                                                     
"zhPiping          "://支护--基坑涌土、流砂、管涌                                                       
"zhOther           "://支护--其他                                                                        
"sgSoil            "://施工--开挖区域土质情况                                                           
"sgThickness       "://施工--基坑开挖分段长度及分层厚度                                              
"sgSurfaceWater   "://施工--地表水、地下水状况                                                  
"sgRecharge        "://施工--基坑降水（回灌）设施运转情况                                             
"sgHeapLoad       "://施工--基坑周边地面堆载情况                                                    
"sgOther           "://施工--其他                                                                        
"zbBroken          "://周边环境--管道破损、泄露情况                                                     
"zbCracks          "://周边环境--周围建筑裂缝                                                           
"zbSubsidence      ": //周边环境--周边道路（地面）裂缝、沉陷                                         
"zbNearWork       ": //周边环境--临近施工情况                                                        
"zbOther           ": //周边环境--其他                                                                    
"jcBenchmark       "://监测设施--基准点完好的状况                                                    
"jcPoint           "://监测设施--测点完好的状况                                                         
"jcElement         "://监测设施--监测元件完好情况                                                      
"jcWork            "://监测设施--观测工作条件                                                             
    
    //监护类型
"aaSerious         "://AA级--严重的涌水或有堆积的渗泥沙                                                
"aaTunnel          "://AA级--隧道内成水膜状的连续渗流                                                   
"aaLineLeak       "://AA级--线漏                                                                    
"aaFiber           "://AA级--顶部纤维加囷件及防排水设备破损等有侵限危险情况                              
"aaArticleSealing "://AA级--顶部嵌缝条悬垂有侵限危险（或悬垂大于20CM）                        
"aaPartitionDoor  "://AA级--旁通道隔断门及人防门松动等有侵限危险的病害                         
"aaOther           "://AA级--其他                                                                        
"ajSegment          "://A级--管片腰部渗水                                                               
"ajWetTrack        "://A级--腰部同侧5环以上连续湿迹                                                   
"ajDrain            "://A级--道床排水沟与管片脱离                                                       
"ajGutterCracking  "://A级--道床开裂、排水沟开裂等病害                                          
"ajSleeper          "://A级--轨枕与整体道床离缝                                                         
"ajVerticalRing    "://A级--底部环纵缝渗水每10环大于5环                                           
"ajBolt             "://A级--管片顶部张开可见螺栓                                                       
"ajLossPressure    "://A级--腰部严重压损                                                          
"ajSlight           "://A级--轻微渗泥沙（无堆积）                                                       
"ajLongitudinalSeam"://A级--纵缝嵌缝条翘头10环大于3环                                         
"ajOther            "://A级--其他                                                                          
"bbSeepage         ":// BB级--除AA、A级以外的日常检查发现的其他渗水                                     
"bbDoor            ":// BB级--人防门防淹门门体结构病害                                                
"bbTrailer         ":// BB级--顶部灌浆浆液固结体悬垂                                                   
"bbSealing         ":// BB级--嵌缝条轻微翘头                                                           
"bbOther           ":// BB级--其他                                                                        
"bjFallFast        "://B级--专项检查所发现的顶部开裂有掉块风险                                        
"bjReinforced       "://B级--掉块漏筋等病害                                                           
"bjWaterproof       "://B级--达不到国家二级防水要求的湿迹                                             
"bjOther            "://B级--其他                                                                          
"cjWaterproof       "://C级--满足国家二级防水技术要求的湿迹                                           
"cjImpellers        "://C级--面积<0.01m2且不漏筋的管片掉块等轻微病害                                   
"cjOther            "://C级--其他       
}                                                                   
```

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "添加巡视意见成功"
}
```



### APP--根据项目id和时间查询巡视意见

请求路径：patrol/queryPatrolByProIdAndTime

请求方式：get

参数：

| 参数名    | 参数类型 | 注释                              |
| --------- | -------- | --------------------------------- |
| proId     | String   | 项目id（必填）                    |
| startDate | String   | 总评时间 （必填） eg:"2020-11-02" |

返回值

```json
同上
```



### APP--根据项目id查询项目状态及备注

请求路径：/pro/queryProStatusByProId/{proId} 

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "proId": //项目id
        "status": //状态
        "comment": //备注
    }
}
```











### APP--更改项目进度

请求路径：pro/updateProjet

请求方式：post

参数

```json
{
 	"proId"://项目id
    "status"://项目状态 int (1--5)
    "comment"://备注
}
--注 ：  参数为 json 对象 
```

返回结果

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "修改成功"
}
```



### 判断项目code是否重复

请求路径：pro/judgeProCode/{code}

请求方式：get

返回值

```
true(不重复)/false(重复)
```



### APP--成果分析

请求路径：analysis/analysisOfResult

请求方式：get

参数：

| 参数名    | 参数类型 | 注释                          |
| --------- | -------- | ----------------------------- |
| proId     | Integer  | 项目id（必填）                |
| genre     | Integer  | 1:自动化 2：非自动化 （必填） |
| pointName | String   | 测点 （必填）                 |
| startDate | String   | 开始时间 （eg:2020-10-12）    |
| endDate   | String   | 结束时间 （eg:2020-10-14）    |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "pointName": //测点名称
            "uploadTime": //时间
            "singleNum": //单次量
            "sumNum": //累计量
            "singleWarning": //单次是否告警
            "sumWarning": //累计是否告警
        }
        ...     
    ]
}
```







## **==前期资料接口==**

### 根据项目id和category上传前期资料

请求路径：material/uploadFiles

请求方式：post

参数：

​		files  :文件对象 （必填）

​		proId :项目id（必填）

​		category: 类型：1：前期资料 2：项目照片  （必填）

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "上传成功"
}
```



### 根据id删除前期资料

请求路径：material/deleteById/==参数id值==     （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### APP-根据项目id和category查询前期资料列表 --分页

请求路径：material/queryMaterialsByProIdAndType

参数：

| 参数名   | 参数类型 | 注释                             |
| -------- | -------- | -------------------------------- |
| proId    | int      | 项目id  （必填）                 |
| category | int      | 1：前期资料 2：项目图片 （必填） |
| pageNum  | int      | 第几页  （非必填）               |
| pageSize | int      | 每页记录数（非必填）             |

请求方式：get

```json
--不分页
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "url": //可视化测点图 url
        "records":[{
            "materialName": //资料名称
            "newFileName": //上传到服务器的文件名称
            "format": //格式
            "uploadTime": //上传时间
            "proId": //所属项目id
            "url": //文件所在服务器的地址,
            "mid": //前期资料表id ,
            "category": // 类型：1：前期资料 2：项目照片
            "type": //文件类型
          }  
         ...
        ]
        
    }
}
--分页
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "url": //可视化测点图 url
        "records": {
            "total": //总条数
            "list": [
                {
                   "materialName": //资料名称
                    "newFileName": //上传到服务器的文件名称
                    "format": //格式
                    "uploadTime": //上传时间
                    "proId": //所属项目id
                    "url": //文件所在服务器的地址,
                    "mid": //前期资料表id 
                    "category": // 类型：1：前期资料 2：项目照片
                    "type": //文件类型
                },
               ...
            ],
            "pageNum": //第几页
            "pageSize": //每页记录数
            "pages":   //总页数
            "size": //当前页的数量
    	}
     
    }
}
```



### 根据前期资料id下载文件

请求路径：material/download/==前期资料id==    （必填）

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "下载成功"
}
```



### 前期资料列表--分页

请求路径：material/queryMaterialList

请求方式：get

参数：

| 参数名    | 参数类型 | 注释                             |
| --------- | -------- | -------------------------------- |
| category  | int      | 1：前期资料 2：项目图片 （必填） |
| startDate | String   | 开始日期（非必填）               |
| endDate   | String   | 结束日期（非必填）               |
| content   | String   | 查询内容（非必填）               |
| pageNum   | int      | 第几页  （非必填）               |
| pageSize  | int      | 每页记录数（非必填）             |
| proId     | int      | 项目id（非必填）                 |

返回值

```json
{
        "success": true,
        "code": 200,
        "message": "",
        "result": {
            "total": //总条数
            "list": [
                {
                    "materialName": //资料名称
                    "newFileName": //上传到服务器的文件名称
                    "format": //格式
                    "uploadTime": //上传时间
                    "proId": //所属项目id
                    "url": //文件所在服务器的地址,
                    "mid": //前期资料表id 
                    "category": // 类型：1：前期资料 2：项目照片
                    "type": //文件类型
                    "proName": //项目名称,
            	    "uploadUserName"://上传人名字
                    "uploadUserId": //上传人id
                }
            ],
           "pageNum": //第几页
            "pageSize": //每页记录数
            "pages":   //总页数
            "size": //当前页的数量
        }
    
}
```













## **==报表报告接口==**

### 根据项目id上传阶段报表

请求路径：report/uploadFiles

请求方式：post

参数：

​		files  :文件对象  （必填）

​		proId :项目id   （必填）

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "上传成功"
}
```



### 根据项目id上传日报表

请求路径：report/uploadDailyReport

请求方式：post

参数：

​		file  :文件对象  （必填）

​		startDate : 上传日期 (String: yyyy-MM-dd HH:mm:ss) (必填) 

​		proId :项目id   （必填）

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "上传成功"
}
```





### 根据id删除报表

请求路径：report/deleteById/==参数id值==    （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### APP--根据项目id和category查询报表  -- 分页

请求路径：report/queryReportListByProId

| 参数名   | 参数类型 | 注释                               |
| -------- | -------- | ---------------------------------- |
| proId    | int      | 项目id  （必填）                   |
| category | int      | 类型 1：日报 2：阶段报表  （必填） |
| pageNum  | int      | 第几页   （必填）                  |
| pageSize | int      | 每页记录数  （必填）               |

请求方式：get

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": 1,
        "list": [
            {
                "type": //文件类型
                "startDate": //开始时间,
                "reportName": //报表名称,
                "fileName": //服务器文件名称
                "ext": //文件类型
                "url": //存储在服务的地址
                "proId": //项目id
                "rid": //报表id
                "category"://报表类型： 1：日报表；2：阶段报表
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```



### 根据报表id下载文件

请求路径：report/download/==报表id==   （必填）

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "下载成功"
}
```



### 下载日报表模板文件

请求路径：report/downloadTemplate

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "下载成功"
}
```





### APP--根据报表id查询 日报表详情

请求路径：report/queryReportDayById/==报表id==   （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "type": 1,
        "startDate": //上传时间,
        "reportName": //报表名称,
        "uploadUserName": //上传人员名字
        "uploadUserId": //上传人员id 
        "proId": //项目id
        "rid": 1,
        "dataList": [ //集合
            {
                "id": 1,
                "monitorId": //监测类型id
                "monitorName": //监测类型名称
                "singlePointName": //本次最大变化量对应测点
                "singleNum": //本次最大变化量
                "totalPointName": //总累计最大变化量对应测点
                "totalNum": //总累计最大变化量
                "reportId": //对应报表id
                "monId": //对应阈值表id
        	    "singleWarning": //是否单次告警
                "sumWarning": //是否累计告警
                "monitor": {//阈值信息
                    "monitorId": //阈值表id
                    "singleTop": //单次上限数值
                    "singleDown": //单次下限数值
                    "sumTop": //累计上限数值
                    "sumDown": //累计下限数值
                    "unit": //单位
                    "proId": //项目id
                    
                }
            }
            ...
        ],
		rating：{//项目总评
            
        },
		patrol:{//巡视意见
            
        }
       
    }
}
```





### 报表列表--分页

请求路径：report/queryReportList

请求方式：get

参数：

| 参数名    | 参数类型 | 注释                         |
| --------- | -------- | ---------------------------- |
| proId     | integer  | 项目id（非必填）             |
| category  | int      | 1：日报表2：阶段报表（必填） |
| startDate | String   | 开始日期（非必填）           |
| endDate   | String   | 结束日期（非必填）           |
| content   | String   | 查询内容（非必填）           |
| pageNum   | int      | 第几页  （非必填）           |
| pageSize  | int      | 每页记录数（非必填）         |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": //总条数
        "list": [
            {
                 "type": //文件类型
                "startDate": //开始时间,
                "reportName": //报表名称,
                "fileName": //服务器文件名称
                 "uploadUserName"://上传人名字
                "uploadUserId": //上传人id
                "ext": //文件类型
                "url": //存储在服务的地址
                "proId": //项目id
                "rid": //报表id
                "proName"://项目名称
                "category"://报表类型： 1：日报表；2：阶段报表
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```











## **==工程联系单接口==**

### APP--根据项目id，类型id 上传工程联系单

请求路径：contact/uploadFiles

请求方式：post

参数：

​		files  :文件对象  （必填）

​		proId :项目id   （必填）

​        contactGenreId:工程联系单类型id（必填）

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "上传成功"
}
```



### 根据id删除工程联系单

请求路径：contact/deleteById/==参数id值==   （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### 查询所有工程联系单类型

请求路径：contact/queryContactsGenres

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "id": //类型id
            "describe": //类型名称
        }
       ...
    ]
}
```







### APP--工程联系单列表  -- 分页

请求路径：contact/queryContactList

| 参数名         | 参数类型 | 注释                                 |
| -------------- | -------- | ------------------------------------ |
| pageSize       | int      | 每页记录数  （必填）                 |
| pageNum        | int      | 第几页   （必填）                    |
| proId          | int      | 项目id  (非必填)                     |
| content        | String   | 查询内容（非必填）                   |
| contactGenreId | int      | 类型id （非必填）                    |
| startDate      | String   | 开始时间 （eg:2020-10-12）（非必填） |
| endDate        | String   | 结束时间 （eg:2020-10-13）（非必填） |

请求方式：get

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": //总条数
        "list": [
            {
                "startDate"://上传时间
                "contactName": //资料名称
                "fileName": //服务器资料名称
                "userId": //用户id
                "uploadUserName": //上传用户
                "ext": //文件类型
                "url": //存储在服务的地址
                "proId": //项目id
                "cid": //
            }
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```



### APP--根据项目id查询工程联系单列表

请求路径：contact/queryContactListByProIdForApp/proId   （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "id": //联系单类型id
            "describe": //联系单类型名称
            "contactList": [
                {
                    "startDate"://上传时间
                    "contactName": //资料名称
                    "fileName": //服务器资料名称
                    "userId": //用户id
                    "uploadUserName": //上传用户
                    "ext": //文件类型
                    "url": //存储在服务的地址
                    "proId": //项目id
                    "cid": //
                }
        	  ...
            ]
        }
        ...
        
    ]
}
```





### 根据联系单id下载文件

请求路径：contact/download/id  （必填）

请求方式：get

返回值：

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "下载成功"
}
```





## **==参数（报警值）设置==**

### APP--查询所有参数

请求路径：monitor/queryAllMonitors

请求方式：get

参数：

| 参数名   | 参数类型 | 注释                     |
| -------- | -------- | ------------------------ |
| proId    | int      | 项目id （非必填）        |
| mgId     | int      | 监测类型（非必填）       |
| proName  | String   | 项目名称（非必填）       |
| pageNum  | int      | 第几页   （非必填）      |
| pageSize | int      | 每页展示条数  （非必填） |

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": {
        "total": 7,
        "list": [
            {
                "monitorId": //监测类型id
                "singleTop": //单次上限
                "singleDown": //单次下限
                "sumTop": //累计上限
                "sumDown"://累计下限
                "unit": //单位
                "proId": //项目id
                "proName": //项目名称
                "mgName": //监测类型名称
                "mid": //监测阈值id （主键）
            },
          ...
        ],
        "pageNum": //第几页
        "pageSize": //每页记录数
        "pages":   //总页数
        "size": //当前页的数量
    }
}
```





### 修改参数

请求路径：monitor/updateMonitor

请求方式：post

参数：json 数据

```json
{
    "mid"://监测阈值id （主键 必填）
    "monitorId": //监测类型id
    "singleTop": //单次上限
    "singleDown": //单次下限
    "sumTop": //累计上限
    "sumDown"://累计下限
    "unit": //单位
}
```

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "修改成功"
}
```





### 删除参数

请求路径：monitor/delMonitorById/{mid}  （必填）

请求方式：get

返回值

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### 查询所有监测类型

请求路径：dictMonitorGuard/queryMonitorGuardInfo

请求方式：get

返回结果 

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        {
            "mgId": //监测内容id
            "mgName": //监测内容名称
            "type": //监测类型 1：监测 2：监护
        }
        ...
    ]
}
```



## **==可视化测点图==**

### 创建可视化测点图

请求路径：pointFigure/createPointFigure

请求方式：post

参数：json

```json
{
    "proId"://项目id （必填）
    "reproduction"://底图信息（必填）
    "drawingInfo"://画图信息（必填）
    "pointFigureName"://测点图名称（必填）
    "pointList":[ //测点id集合 （必填）
       "1", "2","4"
    ]
}
```

返回结果

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "创建成功"
}
```





### 修改可视化测点图

请求路径：pointFigure/updatePointFigure

请求方式：post

参数：json

```json
{
    "id"://测点图id （必填）
    "proId"://项目id （非必填）
    "reproduction"://底图信息 （非必填）
    "drawingInfo"://画图信息  （非必填）
    "pointFigureName"://测点图名称（非选填）
    "pointList":[ //测点id集合  （必填）
       "1", "2","4"
    ]
}
```

返回结果

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "更新成功"
}
```



### 根据id删除可视化测点图

请求路径：pointFigure/delPointFigureById/{id}  （必填）

请求方式：get

返回结果

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": "删除成功"
}
```



### APP--根据项目id查询 可视化视点图

请求路径：pointFigure/queryPointFigureByProId/{proId} （必填）

请求方式：get

返回结果

```json
{
    "success": true,
    "code": 200,
    "message": "",
    "result": [
        "url": //"http://localhost:8080/#/m_projectBoard?cid=486"  url
        "records":[ {
            "id": //可视化视点图id
            "proId": //项目id
            "reproduction": //"底图信息1,
            "drawingInfo": //"画图信息1",
            "createTime": //创建时间
            "createUserId": //创建人id
            "createUserName": //创建人名称
            "pointFigureName": //可视化测点图名称
            "pointList": [ //视图包含的所有测点
                1,
                2,
                4
            ],
            "gaugePointList": [
                {
                    "gaugeId": //测点内容id
                    "monitorId": //监测类型id
                    "monitorName": //监测内容
                    "proId": //项目id
                    "pointList": [ //测点集合
                        {
                            "pointName": //测点名称
                            "eqId": //设备id
                            "gaugeId": //测点内容id
                            "pid": //测点id
                        }
                		...
                    ],
                    "pointSize": null
                }
			  ...
                
            ]
        }
        ...

        
    ]
}
```

